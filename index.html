<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Yotyosr — شبيه يوتيوب</title>
<style>
  body{margin:0;background:#0f0f0f;color:#fff;font-family:Roboto,"Segoe UI",Tahoma,sans-serif}
  .header{display:flex;justify-content:space-between;align-items:center;padding:8px 16px;background:#0f0f0f;border-bottom:1px solid #303030}
  .logo{display:flex;align-items:center;gap:8px;font-weight:700}
  .logo .play{width:26px;height:18px;background:#fff;clip-path:polygon(0 0,100% 50%,0 100%)}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;padding:16px}
  .card{cursor:pointer}
  .thumb{width:100%;aspect-ratio:16/9;background:#111;border-radius:12px;object-fit:cover}
  .meta{margin-top:6px}
  .title{font-weight:500}
  .sub{color:#aaa;font-size:.9rem}
  video{width:100%;max-height:70vh;background:#000;border-radius:12px}
</style>
</head>
<body>
<div class="header">
  <div class="logo"><div class="play"></div><div class="name">Yotyosr</div></div>
</div>
<div id="homeView">
  <div class="grid" id="grid"></div>
</div>
<div id="watchView" style="display:none;padding:16px">
  <video id="player" controls playsinline></video>
  <div class="title" id="watchTitle">—</div>
  <div class="sub" id="watchMeta">—</div>
  <button onclick="backHome()">⬅️ رجوع</button>
</div>

<script>
const grid=document.getElementById('grid');
const homeView=document.getElementById('homeView');
const watchView=document.getElementById('watchView');
const player=document.getElementById('player');
const watchTitle=document.getElementById('watchTitle');
const watchMeta=document.getElementById('watchMeta');
let library=[];

async function loadVideos(){
  const res=await fetch('videos.json');
  library=await res.json();
  renderHome();
}

function renderHome(){
  grid.innerHTML='';
  library.forEach(it=>{
    const card=document.createElement('div');card.className='card';
    const th=document.createElement('img');th.className='thumb';th.src=it.thumb||'';th.alt=it.title;
    const meta=document.createElement('div');meta.className='meta';
    const title=document.createElement('div');title.className='title';title.textContent=it.title;
    const sub=document.createElement('div');sub.className='sub';sub.textContent=`${it.channel} • ${it.views} • ${it.age}`;
    meta.appendChild(title);meta.appendChild(sub);
    card.appendChild(th);card.appendChild(meta);
    card.addEventListener('click',()=>openWatch(it));
    grid.appendChild(card);
  });
}

function openWatch(it){
  homeView.style.display='none';
  watchView.style.display='block';
  player.src=it.url;
  watchTitle.textContent=it.title;
  watchMeta.textContent=`${it.channel} • ${it.views} • ${it.age}`;
}
function backHome(){
  watchView.style.display='none';
  homeView.style.display='block';
  player.pause();
}

document.addEventListener('DOMContentLoaded',loadVideos);
</script>
</body>
</html>
